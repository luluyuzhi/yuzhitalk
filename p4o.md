## 请教可以使用MQ消息队列中间件做即时通讯系统吗？

问： ActiveMQ类似的消息队列 可以使用发布-订阅或P2P模式, 可以用于开发即时通讯系统吗, 感觉好像没什么应用, 会有什么缺陷吗?

答： 
单纯从技术上看，IM系统的所有数据路径无非就是3种情况：
1）消息从A客户端 -> 经由服务器->再转发给B客户端：即C to S to C；
2）消息从A客户端直发服务端：即C to S；
2）消息从服务器直发A客户端：即S to C。

而消息中间件里的订阅模式：
即生产者推送消息到MQ、再由消费者从MQ读取，理论上是完全可以实现上面所说的3种消息传递路径的，如果要实现IM消息的生产和消费，基本上就是一个用户对应一个队列，而大量用户存在的情况下就是大量的队列产生，而每个队列的消息流转其实很少，试想一个人聊天时能发出多少消息？。

但存在一个问题的：
本身MQ被设计来的目的是处理大量的消息的，也即是通常的应用场景下，不会有多少队列存在，但每个队列每秒都要满负荷处理大量的消息，而假设你来开发MQ中间的话，你也能想到：你最大的优化目标是将每个队列的消息处理吞吐做到最大化，而不应该把处理大量的队列连接、断开、重连这些事情做为MQ存在的意义。

综上：
我的个人意见是，没有行不行，而是合不合适，所以就看你怎么选择了。有的人因为IM系统很小，为了省事或偷懒，也真就是用MQ来实现的，但除非你老板懂技术，不然谁管你。

(请教可以使用MQ消息队列中间件做即时通讯系统吗？)[http://www.52im.net/thread-699-1-1.html]


(如何保证IM实时消息的“时序性”与“一致性”？)[http://www.52im.net/thread-714-1-1.html]



命题：除非阻塞消息的并发，没有一个绝对的方法能够衡量绝对时间，来保


我们需要一个衡量指标：

1. 邮件展示顺序：其实是以客户端发送时间为准的，潜台词是，发送方只要将邮件协议里的时间调整为1970年或者2970年，就可以在接收方收到邮件后一直“置顶”或者“置底”。
2. 秒杀活动时间判断：肯定得以服务器的时间为准，不可能让客户端修改本地时间，就能够提前秒杀。

思考： 微信保存在线上的微信3天的聊天记录时间，